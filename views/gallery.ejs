<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>发动机虚拟装配系统 - 图库</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css">
</head>
<body class="gallery-page">
  <!-- 导航栏 -->
  <nav class="main-nav">
    <div class="nav-container">
      <div class="logo">
        <i class="fas fa-cogs"></i>
        <span>发动机虚拟装配系统</span>
      </div>
      
      <ul class="nav-links">
        <li><a href="/dashboard"><i class="fas fa-home"></i> 主页</a></li>
        <li class="active"><a href="/gallery"><i class="fas fa-images"></i> 图库</a></li>
        <li><a href="/game"><i class="fas fa-gamepad"></i> 装配游戏</a></li>
        <li><a href="/model"><i class="fas fa-cube"></i> 3D模型</a></li>
      </ul>
      
      <div class="user-panel">
        <span class="username"><i class="fas fa-user"></i> <%= username %></span>
        <a href="/logout" class="logout-btn"><i class="fas fa-sign-out-alt"></i> 退出</a>
      </div>
    </div>
  </nav>
  
  <!-- 主要内容 -->
  <main class="main-content">
    <div class="page-header">
      <h1>发动机虚拟装配展示</h1>
      <p>浏览高清图片和视频，了解发动机结构和装配过程</p>
    </div>
    
    <!-- 导航标签 -->
    <div class="gallery-tabs">
      <button class="tab-btn active" data-target="images-section">图片展示</button>
      <button class="tab-btn" data-target="videos-section">视频教程</button>
      <button class="tab-btn" data-target="resources-section">技术资料</button>
    </div>
    
    <!-- 图片部分 -->
    <section id="images-section" class="gallery-section active">
      <h2>发动机结构图片展示</h2>
      
      <div class="gallery-filter">
        <button class="filter-btn active" data-filter="all">全部</button>
        <button class="filter-btn" data-filter="overview">整体结构</button>
        <button class="filter-btn" data-filter="parts">零部件</button>
        <button class="filter-btn" data-filter="assembly">装配过程</button>
      </div>
      
      <div class="gallery-grid">
        <!-- 如果没有真实图片，则使用占位图 -->
        <div class="gallery-item" data-category="overview">
          <a href="/api/placeholder/800/600" data-lightbox="engine-gallery" data-title="发动机整体结构">
            <img src="/api/placeholder/400/300" alt="发动机整体结构">
            <div class="gallery-caption">发动机整体结构</div>
          </a>
        </div>
        
        <div class="gallery-item" data-category="overview">
          <a href="/images/剖面图.png" data-lightbox="engine-gallery" data-title="发动机剖面图">
            <img src="/images/剖面图.png" alt="发动机剖面图">
            <div class="gallery-caption">发动机剖面图</div>
          </a>
        </div>
        
        <div class="gallery-item" data-category="parts">
          <a href="/api/placeholder/800/600" data-lightbox="engine-gallery" data-title="活塞组件">
            <img src="/api/placeholder/400/300" alt="活塞组件">
            <div class="gallery-caption">活塞组件</div>
          </a>
        </div>
        
        <div class="gallery-item" data-category="parts">
          <a href="/api/placeholder/800/600" data-lightbox="engine-gallery" data-title="曲轴组件">
            <img src="/api/placeholder/400/300" alt="曲轴组件">
            <div class="gallery-caption">曲轴组件</div>
          </a>
        </div>
        
        <div class="gallery-item" data-category="parts">
          <a href="/api/placeholder/800/600" data-lightbox="engine-gallery" data-title="气缸盖组件">
            <img src="/api/placeholder/400/300" alt="气缸盖组件">
            <div class="gallery-caption">气缸盖组件</div>
          </a>
        </div>
        
        <div class="gallery-item" data-category="assembly">
          <a href="/images/动捕分析.png" data-lightbox="engine-gallery" data-title="动捕分析">
            <img src="/images/动捕分析.png" alt="动捕分析">
            <div class="gallery-caption">动捕分析</div>
          </a>
        </div>
        
        <div class="gallery-item" data-category="assembly">
          <a href="/images/多人协同.png" data-lightbox="engine-gallery" data-title="多人协同">
            <img src="/images/多人协同.png" alt="多人协同">
            <div class="gallery-caption">多人协同</div>
          </a>
        </div>
        
        <div class="gallery-item" data-category="assembly">
          <a href="/api/placeholder/800/600" data-lightbox="engine-gallery" data-title="气缸盖安装过程">
            <img src="/api/placeholder/400/300" alt="气缸盖安装过程">
            <div class="gallery-caption">气缸盖安装过程</div>
          </a>
        </div>
      </div>
    </section>
    
    <!-- 视频部分 -->
    <section id="videos-section" class="gallery-section">
      <h2>发动机装配视频教程</h2>
      
      <div class="video-grid">
        <div class="video-item">
          <div class="video-thumbnail">
            <img src="/api/placeholder/400/225" alt="发动机整体装配视频">
            <div class="play-icon"><i class="fas fa-play"></i></div>
          </div>
          <div class="video-info">
            <h3>发动机整体装配流程</h3>
            <p>全面展示发动机从零部件到成品的完整装配过程。</p>
            <span class="video-duration">12:36</span>
          </div>
        </div>
        
        <div class="video-item">
          <div class="video-thumbnail" data-video="/videos/工厂调度.mp4">
            <img src="/images/自定义工位.png" alt="工厂调度">
            <div class="play-icon"><i class="fas fa-play"></i></div>
          </div>
          <div class="video-info">
            <h3>工厂调度流程</h3>
            <p>详细展示发动机装配工位自定义配置。</p>
            <span class="video-duration">00:20</span>
          </div>
        </div>
        
        <div class="video-item">
          <div class="video-thumbnail">
            <img src="/api/placeholder/400/225" alt="气缸盖装配视频">
            <div class="play-icon"><i class="fas fa-play"></i></div>
          </div>
          <div class="video-info">
            <h3>气缸盖与气门装配详解</h3>
            <p>专业讲解气缸盖组件的安装流程和技术要点。</p>
            <span class="video-duration">10:18</span>
          </div>
        </div>
        
        <div class="video-item">
          <div class="video-thumbnail">
            <img src="/api/placeholder/400/225" alt="燃油系统装配视频">
            <div class="play-icon"><i class="fas fa-play"></i></div>
          </div>
          <div class="video-info">
            <h3>燃油系统装配与调试</h3>
            <p>展示燃油系统的装配过程和精确调试方法。</p>
            <span class="video-duration">09:27</span>
          </div>
        </div>
      </div>
    </section>
    
    <!-- 资料部分 -->
    <section id="resources-section" class="gallery-section">
      <h2>技术资料与规范</h2>
      
      <div class="resources-grid">
        <div class="resource-item">
          <div class="resource-icon"><i class="fas fa-file-pdf"></i></div>
          <div class="resource-info">
            <h3>发动机装配技术手册</h3>
            <p>全面的发动机装配技术指南，包含各种型号的装配流程和标准。</p>
            <a href="/documents/manuals/航空发动机装配工具-2025.4.5.pdf" class="resource-download">下载 PDF</a>
          </div>
        </div>
        
        <div class="resource-item">
          <div class="resource-icon"><i class="fas fa-file-alt"></i></div>
          <div class="resource-info">
            <h3>装配工艺规范</h3>
            <p>详细的装配工艺规范文档，规定了各部件的装配要求和质量标准。</p>
            <a href="/documents/manuals/附件齿轮箱和总装.pdf" class="resource-download">下载 PDF</a>
          </div>
        </div>
        
        <div class="resource-item">
          <div class="resource-icon"><i class="fas fa-table"></i></div>
          <div class="resource-info">
            <h3>零部件参数表</h3>
            <p>包含所有发动机零部件的技术参数、公差和装配要求。</p>
            <a href="#" class="resource-download">下载 Excel</a>
          </div>
        </div>
        
        <div class="resource-item">
          <div class="resource-icon"><i class="fas fa-chalkboard-teacher"></i></div>
          <div class="resource-info">
            <h3>装配培训课程</h3>
            <p>系统的发动机装配理论和实践培训课程，包含视频和互动练习。</p>
            <a href="#" class="resource-download">访问课程</a>
          </div>
        </div>
      </div>
    </section>
  </main>
  
  <!-- 页脚 -->
  <footer class="main-footer">
    <div class="footer-container">
      <div class="footer-info">
        <p>© 2025 BUAA工业设计系发动机虚拟装配技术课题组</p>
        <p>先进技术，精密工程</p>
      </div>
    </div>
  </footer>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>
  <script src="/js/main.js"></script>
  <script>
    // 标签切换
    document.querySelectorAll('.tab-btn').forEach(button => {
      button.addEventListener('click', () => {
        // 移除所有标签和内容的活动状态
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('.gallery-section').forEach(section => section.classList.remove('active'));
        
        // 添加当前标签和内容的活动状态
        button.classList.add('active');
        const targetId = button.getAttribute('data-target');
        document.getElementById(targetId).classList.add('active');
      });
    });
    
    // 图片筛选
    document.querySelectorAll('.filter-btn').forEach(button => {
      button.addEventListener('click', () => {
        // 移除所有筛选按钮的活动状态
        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
        
        // 添加当前筛选按钮的活动状态
        button.classList.add('active');
        
        const filter = button.getAttribute('data-filter');
        
        // 筛选图片
        document.querySelectorAll('.gallery-item').forEach(item => {
          if (filter === 'all' || item.getAttribute('data-category') === filter) {
            item.style.display = 'block';
          } else {
            item.style.display = 'none';
          }
        });
      });
    });
    
  </script>

  <!-- 在 body 底部确保引入了 Lightbox 脚本 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>
<script>
  // 配置 Lightbox
  lightbox.option({
    'resizeDuration': 200,
    'wrapAround': true,
    'albumLabel': "图片 %1 / %2",
    'alwaysShowNavOnTouchDevices': true,
    'fadeDuration': 300
  });

  // 确保点击图片外部区域可以关闭图片查看
  $(document).on('click', '.lb-overlay, .lb-close', function() {
    lightbox.end();
    return false;
  });
</script>
<script src="/js/video-player.js"></script>
<script src="/js/download-handler.js"></script>